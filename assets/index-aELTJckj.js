import{u as c,d,a as v,E as n}from"./v4-8vOWqfD8.js";import{a as r}from"./axios-L6U4YIEh.js";import{r as m,c as g}from"./index-cdpmPB2x.js";const s=c(),h=(e,a,u,i)=>i?(e[e.findIndex(l=>l.label===i)].children[e[e.findIndex(l=>l.label===i)].children.findIndex(l=>l.label===a)].disabled=u,e):(e[e.findIndex(l=>l.label===a)].disabled=u,e),y=async()=>{const e=await d.toCanvas(document.querySelector(".svg-container"),{bgcolor:"#fff",quality:.5,scale:1.55});return v(e)},E=()=>{const e=m(!1),a=m({"Full Name":"","Email Address":"","Phone Number":""}),u=g(()=>{let o={};return Object.keys(a.value).forEach(t=>{o[t]=[{required:!0,message:`Please Enter Your ${t}`,trigger:"blur"}]}),o});return{dialogVisible:e,form:a,rules:u,submitForm:async()=>{const o=await r.post("https://api.quickbase.com/v1/records",{to:"btwxxg4fg",data:[{6:{value:a.value["Full Name"]},7:{value:a.value["Email Address"]},8:{value:a.value["Phone Number"]},9:{value:`The ${document.title.split("-")[1]}`},10:{value:s.mainLevel.optionData},11:{value:s.upperLevel.optionData},12:{value:s.lowerLevel.optionData},13:{value:s.mainLevel.img},14:{value:s.upperLevel.img},15:{value:s.lowerLevel.img}}],fieldsToReturn:[6,7,8,9,10,11,12,13,14,15]},{headers:{Authorization:"QB-USER-TOKEN b8deue_qi2q_0_qf4xb7c43rv98cjbs2yacj5nie5","QB-Realm-Hostname":"anchorhomes.quickbase.com"},timeout:5e3});if(o.status===200&&o.data.data.length>0){n({message:"Submitted successfully!",type:"success"}),e.value=!1;const t=await r.post("https://gateway.myanchorhomes.com/api/sendInteractiveEmail",{name:a.value["Full Name"],email:a.value["Email Address"],phoneNumber:a.value["Phone Number"],modelType:`The ${document.title.split("-")[1]}`,image1:"data:image/png;base64,"+s.mainLevel.img.data,image2:"data:image/png;base64,"+s.upperLevel.img.data,image3:"data:image/png;base64,"+s.lowerLevel.img.data});t.status===200&&t.data==="Send Email Successfully"&&n({type:"success",message:"Email has been sent to relevant personnel!"}),a.value={"Full Name":"","Email Address":"","Phone Number":""}}else n({message:"Submission failed!",type:"error"}),e.value=!1},cancelDialog:()=>{s.cancelUpload(),a.value={"Full Name":"","Email Address":"","Phone Number":""},e.value=!1}}};export{E as a,y as b,h as u};
